<article class="mb-6">
  <!-- Headers -->
  <header class="flex p-3 justify-between items-center">
    <div class="flex cursor-pointer items-center">
      <% if post.user.avatar.attached? %>
        <%= cl_image_tag current_user.avatar.key, alttext: "avatar", class: "avatar-small" %>
      <% else %>
        <%= image_tag "https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png", alttext: "placeholder avatar", class: "avatar-small" %>
      <% end %>

      <%= link_to post.user.username, user_path(post.user), class: "ml-3 font-bold" %>
    </div>
    <i class="material-icons cursor-pointer">more_horiz</i>
  </header>

  <!-- Image -->
  <div class="w-full" style="height: 300px; background-size: cover; background-image: url('https://images.unsplash.com/photo-1534361960057-19889db9621e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80')"></div>

  <!-- CTAs -->
  <div class="mx-4">
    <section class="flex py-4">
      <% if post.liked_by_user? current_user %>
        <%= link_to like_path(post.find_like(user: current_user, post: post)), method: :delete, class: "mr-4" do %>
          <i class="material-icons text-red-600">favorite</i>
        <% end %>
      <% else %>
        <%= link_to post_likes_path(post), method: :post, class: "mr-4" do %>
          <i class="material-icons">favorite_border</i>
        <% end %>
      <% end %>

      <%= link_to "#", class: "mr-4" do %>
        <i class="material-icons">comment</i>
      <% end %>

      <%= link_to "#", class: "mr-4" do %>
        <i class="material-icons">send</i>
      <% end %>

      <%= link_to "#" do %>
        <i class="material-icons">bookmark_bordered</i>
      <% end %>
    </section>

    <!-- Number of likes -->
    <section>
      <% if post.any_likes? %>
        <p class="font-bold"><%= pluralize(post.likes.count, "like") %></p>
      <% end %>
    </section>

    <!-- Comment snippets -->
    <section>
      <% post.comments.each do |comment| %>
        <p>
          <span class="font-bold"><%= comment.user.username %></span>&nbsp;
          <%= comment.content[0..35]... %>
        </p>
      <% end %>
      <%= link_to "View all #{pluralize(post.comments.count, "comment")}", post_comments_path(post), class: "text-gray-400" %>
    </section>
  </div>
</article>
